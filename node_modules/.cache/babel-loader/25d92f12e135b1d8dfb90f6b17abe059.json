{"ast":null,"code":"// action - state management\nimport * as actionTypes from './actions';\nimport { filter } from 'lodash';\nimport { Chance } from 'chance';\nconst chance = new Chance();\nexport const initialState = {\n  checkout: {\n    step: 0,\n    products: [],\n    subtotal: 0,\n    total: 0,\n    discount: 0,\n    shipping: 0,\n    billing: null,\n    payment: {\n      type: 'free',\n      method: 'cod',\n      card: ''\n    }\n  }\n}; // ===========================|| E-COMMERCE REDUCER ||=========================== //\n\nconst cartReducer = (state = initialState, action) => {\n  let subtotal;\n  let result;\n  let latestProducts;\n  let newProduct;\n  let inCartProduct;\n  let oldSubTotal;\n  let amount;\n  let difference;\n  let newShipping;\n\n  switch (action.type) {\n    case actionTypes.ADD_PRODUCTS:\n      newProduct = { ...action.product,\n        itemId: chance.timestamp()\n      };\n      subtotal = newProduct.quantity * newProduct.offerPrice;\n      inCartProduct = filter(state.checkout.products, {\n        id: newProduct.id,\n        color: newProduct.color,\n        size: newProduct.size\n      });\n\n      if (inCartProduct && inCartProduct.length > 0) {\n        const newProducts = state.checkout.products.map(item => newProduct.id === item.id && newProduct.color === item.color && newProduct.size === item.size ? { ...newProduct,\n          quantity: newProduct.quantity + inCartProduct[0].quantity\n        } : item);\n        latestProducts = newProducts;\n      } else {\n        latestProducts = [...state.checkout.products, newProduct];\n      }\n\n      return { ...state,\n        checkout: { ...state.checkout,\n          products: latestProducts,\n          subtotal: state.checkout.subtotal + subtotal,\n          total: state.checkout.total + subtotal\n        }\n      };\n\n    case actionTypes.REMOVE_PRODUCT:\n      result = filter(state.checkout.products, {\n        itemId: action.id\n      });\n      subtotal = result[0].quantity * result[0].offerPrice;\n      return { ...state,\n        checkout: { ...state.checkout,\n          products: filter(state.checkout.products, item => item.itemId !== action.id),\n          subtotal: state.checkout.subtotal - subtotal,\n          total: state.checkout.total + -subtotal\n        }\n      };\n\n    case actionTypes.UPDATE_QUANTITY:\n      result = filter(state.checkout.products, {\n        itemId: action.id\n      });\n      subtotal = action.quantity * result[0].offerPrice;\n      oldSubTotal = 0;\n      newProduct = state.checkout.products.map(item => {\n        if (action.id === item.itemId) {\n          oldSubTotal = item.quantity * item.offerPrice;\n          return { ...item,\n            quantity: action.quantity\n          };\n        }\n\n        return item;\n      });\n      return { ...state,\n        checkout: { ...state.checkout,\n          products: newProduct,\n          subtotal: state.checkout.subtotal - oldSubTotal + subtotal,\n          total: state.checkout.total - oldSubTotal + subtotal\n        }\n      };\n\n    case actionTypes.SET_STEP:\n      return { ...state,\n        checkout: { ...state.checkout,\n          step: action.step\n        }\n      };\n\n    case actionTypes.BACK_STEP:\n      return { ...state,\n        checkout: { ...state.checkout,\n          step: state.checkout.step - 1\n        }\n      };\n\n    case actionTypes.NEXT_STEP:\n      return { ...state,\n        checkout: { ...state.checkout,\n          step: state.checkout.step + 1\n        }\n      };\n\n    case actionTypes.SET_BILLING_ADDRESS:\n      return { ...state,\n        checkout: { ...state.checkout,\n          billing: action.address\n        }\n      };\n\n    case actionTypes.SET_DISCOUNT:\n      amount = 0;\n      difference = 0;\n\n      if (state.checkout.total > 0) {\n        switch (action.code) {\n          case 'BERRY50':\n            amount = chance.integer({\n              min: 1,\n              max: state.checkout.total < 49 ? state.checkout.total : 49\n            });\n            break;\n\n          case 'FLAT05':\n            amount = state.checkout.total < 5 ? state.checkout.total : 5;\n            break;\n\n          case 'SUB150':\n            amount = state.checkout.total < 150 ? state.checkout.total : 150;\n            break;\n\n          case 'UPTO200':\n            amount = chance.integer({\n              min: 1,\n              max: state.checkout.total < 199 ? state.checkout.total : 199\n            });\n            break;\n\n          default:\n            amount = 0;\n        }\n      }\n\n      if (state.checkout.discount > 0) {\n        difference = state.checkout.discount;\n      }\n\n      return { ...state,\n        checkout: { ...state.checkout,\n          discount: amount,\n          total: state.checkout.total + difference - amount\n        }\n      };\n\n    case actionTypes.SET_SHIPPING_CHARGE:\n      newShipping = 0;\n\n      if (state.checkout.shipping > 0 && action.value === 'free') {\n        newShipping = -5;\n      }\n\n      if (action.value === 'fast') {\n        newShipping = 5;\n      }\n\n      return { ...state,\n        checkout: { ...state.checkout,\n          shipping: action.value === 'fast' ? 5 : 0,\n          total: state.checkout.total + newShipping,\n          payment: { ...state.checkout.payment,\n            type: action.value\n          }\n        }\n      };\n\n    case actionTypes.SET_PAYMENT_METHOD:\n      return { ...state,\n        checkout: { ...state.checkout,\n          payment: { ...state.checkout.payment,\n            method: action.method\n          }\n        }\n      };\n\n    case actionTypes.SET_PAYMENT_CARD:\n      return { ...state,\n        checkout: { ...state.checkout,\n          payment: { ...state.checkout.payment,\n            card: action.card\n          }\n        }\n      };\n\n    case actionTypes.RESET_CART:\n      return initialState;\n\n    default:\n      return state;\n  }\n};\n\nexport default cartReducer;","map":{"version":3,"sources":["/home/sai/projects/django-apps/providertool/frontend/javascript/skeleton/src/store/cartReducer.js"],"names":["actionTypes","filter","Chance","chance","initialState","checkout","step","products","subtotal","total","discount","shipping","billing","payment","type","method","card","cartReducer","state","action","result","latestProducts","newProduct","inCartProduct","oldSubTotal","amount","difference","newShipping","ADD_PRODUCTS","product","itemId","timestamp","quantity","offerPrice","id","color","size","length","newProducts","map","item","REMOVE_PRODUCT","UPDATE_QUANTITY","SET_STEP","BACK_STEP","NEXT_STEP","SET_BILLING_ADDRESS","address","SET_DISCOUNT","code","integer","min","max","SET_SHIPPING_CHARGE","value","SET_PAYMENT_METHOD","SET_PAYMENT_CARD","RESET_CART"],"mappings":"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","sourcesContent":["// action - state management\r\nimport * as actionTypes from './actions';\r\n\r\nimport { filter } from 'lodash';\r\nimport { Chance } from 'chance';\r\n\r\nconst chance = new Chance();\r\n\r\nexport const initialState = {\r\n    checkout: {\r\n        step: 0,\r\n        products: [],\r\n        subtotal: 0,\r\n        total: 0,\r\n        discount: 0,\r\n        shipping: 0,\r\n        billing: null,\r\n        payment: {\r\n            type: 'free',\r\n            method: 'cod',\r\n            card: ''\r\n        }\r\n    }\r\n};\r\n\r\n// ===========================|| E-COMMERCE REDUCER ||=========================== //\r\n\r\nconst cartReducer = (state = initialState, action) => {\r\n    let subtotal;\r\n    let result;\r\n    let latestProducts;\r\n    let newProduct;\r\n    let inCartProduct;\r\n    let oldSubTotal;\r\n    let amount;\r\n    let difference;\r\n    let newShipping;\r\n\r\n    switch (action.type) {\r\n        case actionTypes.ADD_PRODUCTS:\r\n            newProduct = { ...action.product, itemId: chance.timestamp() };\r\n            subtotal = newProduct.quantity * newProduct.offerPrice;\r\n            inCartProduct = filter(state.checkout.products, { id: newProduct.id, color: newProduct.color, size: newProduct.size });\r\n\r\n            if (inCartProduct && inCartProduct.length > 0) {\r\n                const newProducts = state.checkout.products.map((item) =>\r\n                    newProduct.id === item.id && newProduct.color === item.color && newProduct.size === item.size\r\n                        ? { ...newProduct, quantity: newProduct.quantity + inCartProduct[0].quantity }\r\n                        : item\r\n                );\r\n                latestProducts = newProducts;\r\n            } else {\r\n                latestProducts = [...state.checkout.products, newProduct];\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                checkout: {\r\n                    ...state.checkout,\r\n                    products: latestProducts,\r\n                    subtotal: state.checkout.subtotal + subtotal,\r\n                    total: state.checkout.total + subtotal\r\n                }\r\n            };\r\n        case actionTypes.REMOVE_PRODUCT:\r\n            result = filter(state.checkout.products, { itemId: action.id });\r\n            subtotal = result[0].quantity * result[0].offerPrice;\r\n\r\n            return {\r\n                ...state,\r\n                checkout: {\r\n                    ...state.checkout,\r\n                    products: filter(state.checkout.products, (item) => item.itemId !== action.id),\r\n                    subtotal: state.checkout.subtotal - subtotal,\r\n                    total: state.checkout.total + -subtotal\r\n                }\r\n            };\r\n        case actionTypes.UPDATE_QUANTITY:\r\n            result = filter(state.checkout.products, { itemId: action.id });\r\n            subtotal = action.quantity * result[0].offerPrice;\r\n            oldSubTotal = 0;\r\n\r\n            newProduct = state.checkout.products.map((item) => {\r\n                if (action.id === item.itemId) {\r\n                    oldSubTotal = item.quantity * item.offerPrice;\r\n                    return { ...item, quantity: action.quantity };\r\n                }\r\n                return item;\r\n            });\r\n\r\n            return {\r\n                ...state,\r\n                checkout: {\r\n                    ...state.checkout,\r\n                    products: newProduct,\r\n                    subtotal: state.checkout.subtotal - oldSubTotal + subtotal,\r\n                    total: state.checkout.total - oldSubTotal + subtotal\r\n                }\r\n            };\r\n        case actionTypes.SET_STEP:\r\n            return {\r\n                ...state,\r\n                checkout: {\r\n                    ...state.checkout,\r\n                    step: action.step\r\n                }\r\n            };\r\n        case actionTypes.BACK_STEP:\r\n            return {\r\n                ...state,\r\n                checkout: {\r\n                    ...state.checkout,\r\n                    step: state.checkout.step - 1\r\n                }\r\n            };\r\n        case actionTypes.NEXT_STEP:\r\n            return {\r\n                ...state,\r\n                checkout: {\r\n                    ...state.checkout,\r\n                    step: state.checkout.step + 1\r\n                }\r\n            };\r\n        case actionTypes.SET_BILLING_ADDRESS:\r\n            return {\r\n                ...state,\r\n                checkout: {\r\n                    ...state.checkout,\r\n                    billing: action.address\r\n                }\r\n            };\r\n        case actionTypes.SET_DISCOUNT:\r\n            amount = 0;\r\n            difference = 0;\r\n            if (state.checkout.total > 0) {\r\n                switch (action.code) {\r\n                    case 'BERRY50':\r\n                        amount = chance.integer({ min: 1, max: state.checkout.total < 49 ? state.checkout.total : 49 });\r\n                        break;\r\n                    case 'FLAT05':\r\n                        amount = state.checkout.total < 5 ? state.checkout.total : 5;\r\n                        break;\r\n                    case 'SUB150':\r\n                        amount = state.checkout.total < 150 ? state.checkout.total : 150;\r\n                        break;\r\n                    case 'UPTO200':\r\n                        amount = chance.integer({ min: 1, max: state.checkout.total < 199 ? state.checkout.total : 199 });\r\n                        break;\r\n                    default:\r\n                        amount = 0;\r\n                }\r\n            }\r\n            if (state.checkout.discount > 0) {\r\n                difference = state.checkout.discount;\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                checkout: {\r\n                    ...state.checkout,\r\n                    discount: amount,\r\n                    total: state.checkout.total + difference - amount\r\n                }\r\n            };\r\n        case actionTypes.SET_SHIPPING_CHARGE:\r\n            newShipping = 0;\r\n            if (state.checkout.shipping > 0 && action.value === 'free') {\r\n                newShipping = -5;\r\n            }\r\n            if (action.value === 'fast') {\r\n                newShipping = 5;\r\n            }\r\n            return {\r\n                ...state,\r\n                checkout: {\r\n                    ...state.checkout,\r\n                    shipping: action.value === 'fast' ? 5 : 0,\r\n                    total: state.checkout.total + newShipping,\r\n                    payment: {\r\n                        ...state.checkout.payment,\r\n                        type: action.value\r\n                    }\r\n                }\r\n            };\r\n        case actionTypes.SET_PAYMENT_METHOD:\r\n            return {\r\n                ...state,\r\n                checkout: {\r\n                    ...state.checkout,\r\n                    payment: {\r\n                        ...state.checkout.payment,\r\n                        method: action.method\r\n                    }\r\n                }\r\n            };\r\n        case actionTypes.SET_PAYMENT_CARD:\r\n            return {\r\n                ...state,\r\n                checkout: {\r\n                    ...state.checkout,\r\n                    payment: {\r\n                        ...state.checkout.payment,\r\n                        card: action.card\r\n                    }\r\n                }\r\n            };\r\n        case actionTypes.RESET_CART:\r\n            return initialState;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default cartReducer;\r\n"]},"metadata":{},"sourceType":"module"}